<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout1}"> 
<head>
	<link rel="stylesheet" th:href="@{/home.css}">
    <title>홈화면</title>
</head>
<body>
    <div layout:fragment="content">
		<header class="header">
	        <div class="header-content">
	            <h1 class="logo">
	                <span class="watcha">ETCHA</span><span class="pedia">PEDIA</span>
	            </h1>
	            <div class="search-bar">
	                <input type="text" placeholder="검색">
	            </div>
	            <div sec:authorize="isAnonymous()" class="user-menu">
	                <a th:href="@{/user/login}">로그인</a>
	                <a th:href="@{/user/signup}">회원가입</a>
	            </div>
				<div sec:authorize="isAuthenticated()" class="user-menu">
					<a th:href="@{/user/logout}">로그아웃</a>
					<a th:href="@{/news}">소식</a>
			        <img th:src="${#authentication.principal.profile}" alt="프로필" class="profile-img">
			        <span sec:authentication="principal.name"></span>
	            </div>
	        </div>
	    </header>

		<main class="main-container">
	        <section class="rank-section">
	            <h2 class="section-title">인기순</h2>
	            <div class="rank-list">
	                <div class="rank-item" th:each="book, stat : ${popular}">
	                    <div class="rank-number">[[${stat.count}]]</div>
	                    <img th:src="${book.pic}" th:alt="${book.title}" class="book-cover">
	                    <div class="book-info">
	                        <h3 class="book-title">[[${book.title}]]</h3>
	                        <div class="author">[[${book.author}]]</div>
	                    </div>
	                </div>
	            </div>
	        </section>

	        <section class="rank-section">
	            <h2 class="section-title">인기 급상승</h2>
	            <div class="rank-list">
	                <div class="rank-item" th:each="book, stat : ${trend}">
	                    <div class="rank-number">[[${stat.count}]]</div>
	                    <img th:src="${book.pic}" th:alt="${book.title}" class="book-cover">
	                    <div class="book-info">
	                        <h3 class="book-title">[[${book.title}]]</h3>
	                        <div class="author">[[${book.author}]]</div>
	                    </div>
	                </div>
	            </div>
	        </section>
			
			<section class="rank-section">
	            <h2 class="section-title">AI추천 도서</h2>
	            <div class="rank-list">
	                <div class="rank-item" th:each="book, stat : ${recommend}">
	                    <div class="rank-number">[[${stat.count}]]</div>
	                    <img th:src="${book.pic}" th:alt="${book.title}" class="book-cover">
	                    <div class="book-info">
	                        <h3 class="book-title">[[${book.title}]]</h3>
	                        <div class="author">[[${book.author}]]</div>
	                    </div>
	                </div>
	            </div>
	        </section>
	    </main>
	</div>
</html>